<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>stack.blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="stack.blog">
<meta property="og:url" content="https://github.com/songMW/stack.github.io/page/3/index.html">
<meta property="og:site_name" content="stack.blog">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="stack.blog">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">stack.blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        <a id="nav-search-btn" class="nav-icon" title="Rechercher"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://github.com/songMW/stack.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="[layout]-Pod使用过程中遇到的问题" class="article article-type-[layout]" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/03/Pod使用过程中遇到的问题/" class="article-date">
  <time datetime="2017-03-03T06:33:29.000Z" itemprop="datePublished">2017-03-03</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Objective-C/">Objective-C</a>►<a class="article-category-link" href="/categories/Objective-C/iOS常见错误收集/">iOS常见错误收集</a>►<a class="article-category-link" href="/categories/Objective-C/iOS常见错误收集/Pod使用过程中遇到的问题/">Pod使用过程中遇到的问题</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/03/Pod使用过程中遇到的问题/">Pod使用过程中遇到的问题</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="安装篇"><a href="#安装篇" class="headerlink" title="安装篇"></a>安装篇</h1><h2 id="一-CocoaPods简介"><a href="#一-CocoaPods简介" class="headerlink" title="一. CocoaPods简介"></a>一. CocoaPods简介</h2><p>CocoaPods是iOS的包管理工具.</p>
<h2 id="二-CocoaPods安装"><a href="#二-CocoaPods安装" class="headerlink" title="二. CocoaPods安装"></a>二. CocoaPods安装</h2><h3 id="1-安装Ruby"><a href="#1-安装Ruby" class="headerlink" title="1. 安装Ruby"></a>1. 安装Ruby</h3><p>CocoaPods基于Ruby语言开发而成, Mac系统默认自带Ruby环境, 检测是否安装Ruby:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">gem -v</div><div class="line">2.6.7</div></pre></td></tr></table></figure></p>
<h3 id="2-安装-gem"><a href="#2-安装-gem" class="headerlink" title="2. 安装 gem"></a>2. 安装 gem</h3><p><a href="https://rubygems.org/" target="_blank" rel="external">gem 是一个管理 Ruby 库和程序的标准包, 它通过Ruby Gem 源来查找、安装、升级和卸载软件包</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">gem source -l</div><div class="line">*** CURRENT SOURCES ***</div><div class="line"></div><div class="line">https://gems.ruby-china.org/</div></pre></td></tr></table></figure></p>
<p>使用 <code>gem source -l</code> 命令可以查看当前gem源, 并用 <code>https://gems.ruby-china.org/</code> 替换掉原有的gem源, 由于国内网络问题你懂得…</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">//移除源</div><div class="line">gem sources --remove https://rubygems.org/ </div><div class="line"></div><div class="line">//添加源</div><div class="line">gem sources -a https://gems.ruby-china.org/</div></pre></td></tr></table></figure>
<p>完成上面两步之后再次执行 <code>gem source -l</code> 查下看是否 gem 安装成功</p>
<h3 id="3-安装CocoaPods"><a href="#3-安装CocoaPods" class="headerlink" title="3. 安装CocoaPods"></a>3. 安装CocoaPods</h3><p><a href="https://guides.cocoapods.org/" target="_blank" rel="external">CocoaPods官网</a></p>
<h3 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a><font color="#FF0000">Installation</font></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo gem install cocoapods</div></pre></td></tr></table></figure>
<p>安装中….<br>检测pod是否安装成功<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">pod --version</div><div class="line">1.2.1</div></pre></td></tr></table></figure></p>
<p>出现上面的信息说明安装成功, 一次就成了, 不知道安装失败的情形….</p>
<h1 id="使用篇"><a href="#使用篇" class="headerlink" title="使用篇"></a>使用篇</h1><h2 id="1-为工程创建pod"><a href="#1-为工程创建pod" class="headerlink" title="1. 为工程创建pod"></a>1. 为工程创建pod</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">cd 工程目录</div><div class="line">pod init</div></pre></td></tr></table></figure>
<p>会在工程目录下出现 <code>Podfile</code> 文件</p>
<h2 id="2-编辑Podfile"><a href="#2-编辑Podfile" class="headerlink" title="2. 编辑Podfile"></a>2. 编辑Podfile</h2><p>Podfile文件中写入我们需要的第三方库, 比如添加 AFNetworking Podfile内容如下:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">//当前类库支持的iOS最低版本是iOS 7.0</div><div class="line">platform :ios, &apos;7.0&apos;</div><div class="line"></div><div class="line">//类库名称和版本</div><div class="line">pod &apos;AFNetworking&apos;, &apos;~&gt; 3.0&apos;</div></pre></td></tr></table></figure></p>
<p>使用 <code>pod search AFNetworking</code> 即可得到 <code>AFNetworking</code> 的相关信息.</p>
<h2 id="3-pod-install-导入第三方库"><a href="#3-pod-install-导入第三方库" class="headerlink" title="3. pod install 导入第三方库"></a>3. pod install 导入第三方库</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pod install</div></pre></td></tr></table></figure>
<p>使用 <code>pod install</code> 导入第三方库, 导入成功后, 工程中会出现 <code>AdHubSDK.xcworkspace</code> 这个文件, 以后只需打开它就可以了.</p>
<h1 id="使用CocoaPod打包"><a href="#使用CocoaPod打包" class="headerlink" title="使用CocoaPod打包"></a>使用CocoaPod打包</h1><h2 id="1-基于pod命令创建SDK"><a href="#1-基于pod命令创建SDK" class="headerlink" title="1. 基于pod命令创建SDK"></a>1. 基于pod命令创建SDK</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pod lib create MyCustomLib</div></pre></td></tr></table></figure>
<p>调用以后terminal中会需要填写以下问题, 一般选择创建Demo, 其他选项根据需求填写:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">What language do you want to use?? [ Swift / ObjC ]</div><div class="line">&gt; ObjC</div><div class="line"></div><div class="line">Would you like to include a demo application with your library? [ Yes / No ]</div><div class="line">&gt; YES</div><div class="line"></div><div class="line">Which testing frameworks will you use? [ Specta / Kiwi / None ]</div><div class="line">&gt; None</div><div class="line"></div><div class="line">Would you like to do view based testing? [ Yes / No ]</div><div class="line">&gt; Yes</div><div class="line"></div><div class="line">What is your class prefix?</div><div class="line">&gt; QC</div></pre></td></tr></table></figure></p>
<h2 id="2-podspec-文件的内容结构"><a href="#2-podspec-文件的内容结构" class="headerlink" title="2. podspec 文件的内容结构"></a>2. podspec 文件的内容结构</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div></pre></td><td class="code"><pre><div class="line">#</div><div class="line"># Be sure to run `pod lib lint AdHubAdNetwork.podspec&apos; to ensure this is a</div><div class="line"># valid spec before submitting.</div><div class="line">#</div><div class="line"># Any lines starting with a # are optional, but their use is encouraged</div><div class="line"># To learn more about a Podspec see http://guides.cocoapods.org/syntax/podspec.html</div><div class="line">#</div><div class="line"></div><div class="line">Pod::Spec.new do |s|</div><div class="line">s.name             = &apos;AdHubAdNetwork&apos;</div><div class="line">s.version          = &apos;0.1.0&apos;</div><div class="line">s.summary          = &apos;BaiduSDK, AFPSDK, GDTSDK 广告SDK .&apos;</div><div class="line"></div><div class="line"># This description is used to generate tags and improve search results.</div><div class="line">#   * Think: What does it do? Why did you write it? What is the focus?</div><div class="line">#   * Try to keep it short, snappy and to the point.</div><div class="line">#   * Write the description between the DESC delimiters below.</div><div class="line">#   * Finally, don&apos;t worry about the indent, CocoaPods strips it!</div><div class="line"></div><div class="line">s.description      = &lt;&lt;-DESC</div><div class="line">收集BaiduSDK, AFPSDK, GDTSDK三家广告SDK综合在一起, 方便开发者下载使用.</div><div class="line">DESC</div><div class="line"></div><div class="line">s.homepage         = &apos;https://github.com/songMW/AdHubAdNetwork&apos;</div><div class="line"># s.screenshots     = &apos;www.example.com/screenshots_1&apos;, &apos;www.example.com/screenshots_2&apos;</div><div class="line">s.license          = &#123; :type =&gt; &apos;MIT&apos;, :file =&gt; &apos;LICENSE&apos; &#125;</div><div class="line">s.author           = &#123; &apos;songMW&apos; =&gt; &apos;songshoubing7664@163.com&apos; &#125;</div><div class="line">s.source           = &#123; :git =&gt; &apos;https://github.com/songMW/AdHubAdNetwork.git&apos;, :tag =&gt; s.version.to_s &#125;</div><div class="line"># s.social_media_url = &apos;https://twitter.com/&lt;TWITTER_USERNAME&gt;&apos;</div><div class="line"></div><div class="line">s.ios.deployment_target = &apos;7.0&apos;</div><div class="line"></div><div class="line">#s.source_files = &apos;AdHubAdNetwork/Classes/*&apos;</div><div class="line"></div><div class="line">#s.resource_bundles = &#123;</div><div class="line">#&apos;AdHubAdNetwork&apos; =&gt; [&apos;AdHubAdNetwork/Classes/**/*.bundle&apos;]</div><div class="line">#&#125;</div><div class="line"></div><div class="line">#s.vendored_libraries  = [&apos;AdHubAdNetwork/Classes/AFP/*.a&apos;, &apos;AdHubAdNetwork/Classes/GDT/*.a&apos;]</div><div class="line">#s.vendored_frameworks = [&apos;AdHubAdNetwork/Classes/AFP/*.framework&apos;, &apos;AdHubAdNetwork/Classes/Baidu/*.framework&apos;]</div><div class="line"></div><div class="line">s.frameworks = &apos;SystemConfiguration&apos;, &apos;CoreGraphics&apos;, &apos;CoreTelephony&apos;, &apos;Security&apos;, &apos;CoreLocation&apos;, &apos;JavaScriptCore&apos;, &apos;UIKit&apos;, &apos;StoreKit&apos;</div><div class="line">s.libraries  = &apos;iconv&apos;, &apos;sqlite3&apos;, &apos;stdc++&apos;, &apos;z&apos;</div><div class="line"></div><div class="line">s.subspec &apos;GDT&apos; do |gdt|</div><div class="line">gdt.source_files = &apos;AdHubAdNetwork/Classes/GDT/*&apos;</div><div class="line">gdt.vendored_libraries = &apos;AdHubAdNetwork/Classes/GDT/*.a&apos;</div><div class="line">end</div><div class="line"></div><div class="line">s.subspec &apos;Baidu&apos; do |baidu|</div><div class="line">baidu.resources = &apos;AdHubAdNetwork/Classes/Baidu/*.bundle&apos;</div><div class="line">baidu.vendored_libraries = &apos;AdHubAdNetwork/Classes/Baidu/*.a&apos;</div><div class="line">baidu.source_files = &apos;AdHubAdNetwork/Classes/Baidu/*&apos;</div><div class="line">end</div><div class="line"></div><div class="line">s.subspec &apos;AFP&apos; do |afp|</div><div class="line">afp.source_files = &apos;AdHubAdNetwork/Classes/AFP/*&apos;</div><div class="line">afp.vendored_frameworks = &apos;AdHubAdNetwork/Classes/AFP/*.framework&apos;</div><div class="line">afp.vendored_libraries  = &apos;AdHubAdNetwork/Classes/AFP/*.a&apos;</div><div class="line">afp.resources = &apos;AdHubAdNetwork/Classes/AFP/*.bundle&apos;</div><div class="line">end</div><div class="line"></div><div class="line"># s.public_header_files = &apos;AdHubAdNetwork/Classes/**/*.h&apos;</div><div class="line"># s.dependency &apos;AFNetworking&apos;, &apos;~&gt; 2.3&apos;</div><div class="line"></div><div class="line">end</div></pre></td></tr></table></figure>
<p>后面会以这个实例来说遇到的问题.<br>podspec中重要参数:</p>
<ul>
<li><code>s.source</code> 在 github 或者其他平台上创建的仓库地址.</li>
<li><code>s.source_files</code> 表示具体的源码的路径, 这里注意源码一般放到 Classes 文件夹目录下, 而且实体文件中不要有非源码内容放到Classes 文件夹. Classes 文件夹的所有内容都要 Add Targets To: MyCustomLib. 不要 Classes 文件夹或子文件夹中部分内容被 remove referrence.</li>
<li><code>s.resource_bundles</code> 中的资源. 系统会自动将 MyCustomLib/Assets 文件夹下的内容, cocoapod 会将我们把 Assets 中的内容自动打包成 MyCustomLib.bundle.</li>
<li><code>s.public_header_files</code> 用来指定需要对外部暴露的头文件的位置.</li>
<li><code>s.frameworks</code> 和 <code>s.libraries</code>, 表示当前sdk依赖的系统的 framework 和类库.</li>
<li><code>s.dependency</code> 表示当前 podspec 类库对外部第三方库的依赖. 如果使用 pod package 打包sdk时候, 这里的 dependency 会被自动添加前缀, 防止重复引用冲突. 而且这里的依赖只能是pod库(公有或者私有)的内容.</li>
<li><code>s.subspec</code> 用来引入我们sdk依赖的自己的 framework 或者 .a 等静态库.</li>
</ul>
<h2 id="3-验证pod库"><a href="#3-验证pod库" class="headerlink" title="3. 验证pod库"></a>3. 验证pod库</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pod lib lint</div></pre></td></tr></table></figure>
<ul>
<li>–allow-warnings 忽略警告</li>
<li>–verbose, –no-clean 查看详情</li>
</ul>
<h2 id="4-上传git"><a href="#4-上传git" class="headerlink" title="4. 上传git"></a>4. 上传git</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">//上传代码到仓库</div><div class="line">git add .</div><div class="line">git commit -m &quot;需要填写&quot;</div><div class="line">git remote add origin http://github/xxx.git</div><div class="line">git push -u origin master</div><div class="line"></div><div class="line">//添加 tag</div><div class="line">git tag -a 0.1.0 -m &quot;v0.1.0&quot;</div><div class="line">git push origin --tags</div><div class="line"></div><div class="line">//删除 tag</div><div class="line">git tag -d [tagVersion]</div><div class="line">git push origin --delete tag [tagVersion]</div></pre></td></tr></table></figure>
<h2 id="5-上传podspec到cocoa-pods官网的仓库"><a href="#5-上传podspec到cocoa-pods官网的仓库" class="headerlink" title="5. 上传podspec到cocoa pods官网的仓库"></a>5. 上传podspec到cocoa pods官网的仓库</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pod trunk push MyExtension.podspec</div></pre></td></tr></table></figure>
<p>[注册trunk] (<a href="https://guides.cocoapods.org/terminal/commands.html#pod_trunk_register" target="_blank" rel="external">https://guides.cocoapods.org/terminal/commands.html#pod_trunk_register</a>)</p>
<h1 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h1><p><a href="http://www.jianshu.com/p/c28fc53cdad1" target="_blank" rel="external">网上总结的帖子</a></p>
<h2 id="问题1-install，update速度慢"><a href="#问题1-install，update速度慢" class="headerlink" title="问题1. install，update速度慢"></a>问题1. install，update速度慢</h2><p>出现原因: 你本地的repo库太长时间没有更新了<br>解决办法: pod repo update</p>
<p>原因在于当执行以上两个命令的时候会升级CocoaPods的specs仓库, 如果不想在install, update的时候升级specs库, 可以使用参数忽略掉<br>pod install –no-repo-update<br>pod update –no-repo-update</p>
<h2 id="问题2-Swift类库"><a href="#问题2-Swift类库" class="headerlink" title="问题2. Swift类库"></a>问题2. Swift类库</h2><p>导入Swift语言编写的类库时需要加use_frameworks!</p>
<h2 id="问题3-Error-installing-ProtoCompiler"><a href="#问题3-Error-installing-ProtoCompiler" class="headerlink" title="问题3. [!] Error installing !ProtoCompiler"></a>问题3. [!] Error installing !ProtoCompiler</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">[!] Error installing !ProtoCompiler</div><div class="line">[!] /usr/bin/curl -f -L -o /var/folders/nc/t1y4crs914bdytqxx1q_97lr0000gn/T/d20170521-1306-120ndjz/file.zip https://github.com/google/protobuf/releases/download/v3.2.0/protoc-3.2.0-osx-x86_64.zip --create-dirs --netrc-optional</div><div class="line"></div><div class="line">% Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</div><div class="line">Dload  Upload   Total   Spent    Left  Speed</div><div class="line">100   604    0   604    0     0    407      0 --:--:--  0:00:01 --:--:--   407</div><div class="line">0     0    0     0    0     0      0      0 --:--:--  0:01:16 --:--:--     0curl: (7) Failed to connect to github-cloud.s3.amazonaws.com port 443: Operation timed out</div></pre></td></tr></table></figure>
<h3 id="解决方法：执行sudo-xcode-select-switch-Applications-Xcode-app-Contents-Developer-switch-后面加上你的Xcode-app包内容里的Developer的文件夹路径即可"><a href="#解决方法：执行sudo-xcode-select-switch-Applications-Xcode-app-Contents-Developer-switch-后面加上你的Xcode-app包内容里的Developer的文件夹路径即可" class="headerlink" title="解决方法：执行sudo xcode-select -switch /Applications/Xcode.app/Contents/Developer (-switch 后面加上你的Xcode.app包内容里的Developer的文件夹路径即可)"></a>解决方法：执行sudo xcode-select -switch /Applications/Xcode.app/Contents/Developer (-switch 后面加上你的Xcode.app包内容里的Developer的文件夹路径即可)</h3><h2 id="问题4-iOS-file-patterns-The-source-files-pattern-did-not-match-any-file"><a href="#问题4-iOS-file-patterns-The-source-files-pattern-did-not-match-any-file" class="headerlink" title="问题4. [iOS] file patterns: The source_files pattern did not match any file."></a>问题4. [iOS] file patterns: The <code>source_files</code> pattern did not match any file.</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">- ERROR | [iOS] file patterns: The `source_files` pattern did not match any file.</div></pre></td></tr></table></figure>
<p>指定共享的类库时设置 s.source_files 发生了错误, 这里的路径是相对于 xx.podspec 文件的, 如果是与 xx.podspec 同级的文件夹, 直接写文件夹名称即可, 如:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">s.source_files = &quot;xx&quot;</div><div class="line">s.source_files = &quot;xx/*.&#123;h,m&#125;&quot;</div></pre></td></tr></table></figure></p>
<p>如果有多级目录, 一定要逐级添加.<br>或者 进入 <code>/Users/user/Library/Caches/CocoaPods/Pods/External</code> 中找到正在编译的文件, 看是否存在库文件</p>
<h2 id="问题-pod-升级出现下面的错误"><a href="#问题-pod-升级出现下面的错误" class="headerlink" title="问题. pod 升级出现下面的错误"></a>问题. pod 升级出现下面的错误</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Fetching: claide-1.0.2.gem (100%)</div><div class="line">Successfully installed claide-1.0.2</div><div class="line">Fetching: xcodeproj-1.5.0.gem (100%)</div><div class="line">ERROR:  While executing gem ... (Errno::EPERM)</div><div class="line">Operation not permitted - /usr/bin/xcodeproj</div></pre></td></tr></table></figure>
<p>在 <code>stackoverflow</code> 搜到的解释是这样的, <code>This is happening because Apple has enabled rootless on the new install</code>, 在10.11系统上苹果已经启用无根的安装. 在这种情况下, 需使用如下的命令: sudo gem install -n /usr/local/bin cocoapods –pre 升级到 <code>1.3.0.beta.1</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">Successfully installed xcodeproj-1.5.0</div><div class="line">Fetching: cocoapods-core-1.3.0.beta.1.gem (100%)</div><div class="line">Successfully installed cocoapods-core-1.3.0.beta.1</div><div class="line">Fetching: cocoapods-1.3.0.beta.1.gem (100%)</div><div class="line">Successfully installed cocoapods-1.3.0.beta.1</div><div class="line">Parsing documentation for xcodeproj-1.5.0</div><div class="line">Installing ri documentation for xcodeproj-1.5.0</div><div class="line">Parsing documentation for cocoapods-core-1.3.0.beta.1</div><div class="line">Installing ri documentation for cocoapods-core-1.3.0.beta.1</div><div class="line">Parsing documentation for cocoapods-1.3.0.beta.1</div><div class="line">Installing ri documentation for cocoapods-1.3.0.beta.1</div><div class="line">3 gems installed</div></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/songMW/stack.github.io/2017/03/03/Pod使用过程中遇到的问题/" data-id="cj5dkeow8000raformttukxay" class="article-share-link">Partager</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Objective-C/">Objective-C</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="[layout]-NSRunloop" class="article article-type-[layout]" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/02/NSRunloop/" class="article-date">
  <time datetime="2017-03-02T03:29:59.000Z" itemprop="datePublished">2017-03-02</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Objective-C/">Objective-C</a>►<a class="article-category-link" href="/categories/Objective-C/知识点/">知识点</a>►<a class="article-category-link" href="/categories/Objective-C/知识点/NSRunloop/">NSRunloop</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/02/NSRunloop/">NSRunloop</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/songMW/stack.github.io/2017/03/02/NSRunloop/" data-id="cj5dkeovs000gaforu9u69cxe" class="article-share-link">Partager</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Objective-C/">Objective-C</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="[layout]-Autoreleasepool" class="article article-type-[layout]" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/01/Autoreleasepool/" class="article-date">
  <time datetime="2017-03-01T10:29:59.000Z" itemprop="datePublished">2017-03-01</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Objective-C/">Objective-C</a>►<a class="article-category-link" href="/categories/Objective-C/知识点/">知识点</a>►<a class="article-category-link" href="/categories/Objective-C/知识点/Autoreleasepool/">Autoreleasepool</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/01/Autoreleasepool/">Autoreleasepool</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="main-函数"><a href="#main-函数" class="headerlink" title="main 函数"></a>main 函数</h2><p>main 函数是程序的入口, main 函数显示的内容:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">int main(int argc, char * argv[]) &#123;</div><div class="line">    @autoreleasepool &#123;</div><div class="line">        return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>这里 <code>@autoreleasepool</code> block 中只包含了一行代, 这行代码将所有的事件、消息全部交给了 UIApplicationMain 来处理.</p>
<font color="#FF0000">整个 iOS 的应用都是在这个自动释放池 block 中.</font>

<h2 id="autoreleasepool"><a href="#autoreleasepool" class="headerlink" title="@autoreleasepool"></a>@autoreleasepool</h2><p><code>@autoreleasepool</code>是什么?<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">clang -rewrite-objc main.m</div></pre></td></tr></table></figure></p>
<p>在生成的.mm源码中可以看到:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">int main(int argc, char * argv[]) &#123;</div><div class="line">    /* @autoreleasepool */ &#123; __AtAutoreleasePool __autoreleasepool; </div><div class="line">        return UIApplicationMain(argc, argv, __null, NSStringFromClass(((Class (*)(id, SEL))(void *)objc_msgSend)((id)objc_getClass(&quot;AppDelegate&quot;), sel_registerName(&quot;class&quot;))));</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>这里 <code>@autoreleasepool</code> 被注释掉, 取而代之的是 <code>__AtAutoreleasePool</code> , <code>__AtAutoreleasePool</code> 又是什么?<br>在.mm 中搜索发现踪迹:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">extern &quot;C&quot; __declspec(dllimport) void * objc_autoreleasePoolPush(void);</div><div class="line">extern &quot;C&quot; __declspec(dllimport) void objc_autoreleasePoolPop(void *);</div><div class="line"></div><div class="line">struct __AtAutoreleasePool &#123;</div><div class="line">    __AtAutoreleasePool() &#123;atautoreleasepoolobj = objc_autoreleasePoolPush();&#125;</div><div class="line">    ~__AtAutoreleasePool() &#123;objc_autoreleasePoolPop(atautoreleasepoolobj);&#125;</div><div class="line">    void * atautoreleasepoolobj;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p><code>__AtAutoreleasePool</code> 是一个结构体, </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/songMW/stack.github.io/2017/03/01/Autoreleasepool/" data-id="cj5dkeouy0001aforac6cpv5q" class="article-share-link">Partager</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Objective-C/">Objective-C</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="[layout]-TestFlight" class="article article-type-[layout]" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/02/14/TestFlight/" class="article-date">
  <time datetime="2017-02-14T03:05:05.000Z" itemprop="datePublished">2017-02-14</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Objective-C/">Objective-C</a>►<a class="article-category-link" href="/categories/Objective-C/测试工具/">测试工具</a>►<a class="article-category-link" href="/categories/Objective-C/测试工具/TestFlight/">TestFlight</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/02/14/TestFlight/">TestFlight</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="https://developer.apple.com/testflight/" target="_blank" rel="external">TestFlight</a></p>
<h2 id="什么是TestFlight"><a href="#什么是TestFlight" class="headerlink" title="什么是TestFlight"></a>什么是TestFlight</h2><ol>
<li>邀请用户测试来程序;</li>
<li>收集线上程序的重要信息;</li>
<li>使用 email 方式邀请测试者, 最多2000人</li>
</ol>
<h2 id="如何安装"><a href="#如何安装" class="headerlink" title="如何安装?"></a>如何安装?</h2><p>iTunes/AppStore 下载安装, 广告文档中有下载地址.</p>
<h2 id="Getting-Started"><a href="#Getting-Started" class="headerlink" title="Getting Started"></a>Getting Started</h2><ul>
<li>需要参与app测试人员提供一个邮箱</li>
<li>开发者登录iTunes Connect</li>
<li>给测试者发送邀请</li>
<li>测试者接受邀请</li>
<li>然后通过TestFlight下载安装程序</li>
<li>不需要用户提供设备的UDID</li>
<li>内部测试人员最多25个人, 外部测试人员最多2000个人</li>
<li>不需要重新配置证书了, 也不需要手动发送ipa包, 直接上传到iTunes即可.</li>
</ul>
<h2 id="开发者需要做的什么"><a href="#开发者需要做的什么" class="headerlink" title="开发者需要做的什么"></a>开发者需要做的什么</h2><ol>
<li><a href="https://itunesconnect.apple.com" target="_blank" rel="external">进入网址:</a> 输入账号密码登录iTunes Connect.</li>
<li>登录iTunes Connect, 点击我的App, 进入App列表页</li>
<li>点击Internal Testers 添加测试人员</li>
<li>点击External Testers 选择添加新测试员</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/songMW/stack.github.io/2017/02/14/TestFlight/" data-id="cj5dkeowi000yaforejaph3ek" class="article-share-link">Partager</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Objective-C/">Objective-C</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="[layout]-使用ARC" class="article article-type-[layout]" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/02/04/使用ARC/" class="article-date">
  <time datetime="2017-02-04T07:05:05.000Z" itemprop="datePublished">2017-02-04</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Objective-C/">Objective-C</a>►<a class="article-category-link" href="/categories/Objective-C/知识点/">知识点</a>►<a class="article-category-link" href="/categories/Objective-C/知识点/使用ARC/">使用ARC</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/02/04/使用ARC/">使用ARC</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="1-为什么需要内存管理"><a href="#1-为什么需要内存管理" class="headerlink" title="1. 为什么需要内存管理?"></a>1. 为什么需要内存管理?</h2><p>Objective-C 代码创建的对象存储是以动态方式分配的内存即堆内存中, 在堆内存中创建的对象都会存储在这个内存区域中, 因此需要通过内存管理, 确保将不再使用的对象从该内存中移除, 保证正在使用的内存然能保存在内存中.</p>
<h2 id="2-ARC-是什么-如何控制对象的生命周期"><a href="#2-ARC-是什么-如何控制对象的生命周期" class="headerlink" title="2. ARC 是什么? 如何控制对象的生命周期?"></a>2. ARC 是什么? 如何控制对象的生命周期?</h2><p>ARC在编译时通过插入代码, 向对象发送 <code>retain</code> 或者 <code>release</code> 消息达到平衡, 禁止程序员手动管理对象生命周期.</p>
<h2 id="3-如何获得对象的所有权"><a href="#3-如何获得对象的所有权" class="headerlink" title="3. 如何获得对象的所有权?"></a>3. 如何获得对象的所有权?</h2><p>Objective-C 程序能够获取以 <code>alloc</code>, <code>new</code>, <code>copy</code>, <code>mutableCopy</code>开头的方法创建的任何对象.</p>
<h2 id="4-释放对象的所有权"><a href="#4-释放对象的所有权" class="headerlink" title="4. 释放对象的所有权"></a>4. 释放对象的所有权</h2><p>ARC禁止手动方式向对象方式 <code>release</code>, <code>autorelease</code>, <code>dealloc</code> 消息, 执行以下操作时会放弃对象的所有权:</p>
<ul>
<li><p>重新分配变量</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">// 创建一个 Atom 对象(atom 1)赋予变量atom</div><div class="line">Atom *atom = [[Atom alloc]initWithName:@&quot;atom 1&quot;];</div><div class="line">...</div><div class="line"></div><div class="line">// 再次创建一个 Atom 对象(atom 2)赋予变量atom, 此时 atom 已经指向(atom 2), 所以 (atom 1)失去了一个所有者, 如果没有其他的所有者, 那么它将会被释放掉</div><div class="line">atom = [[Atom alloc]initWithName:@&quot;atom 2&quot;];</div></pre></td></tr></table></figure>
</li>
<li><p>将 <code>nil</code> 赋予变量</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">// 创建一个 Atom 对象(atom 1)赋予变量atom</div><div class="line">Atom *atom = [[Atom alloc]initWithName:@&quot;atom 1&quot;];</div><div class="line">...</div><div class="line"></div><div class="line">// 将变量 atom 设置为 nil , 此时 atom 已经指向(nil), 所以 (atom 1)失去了一个所有者, 如果没有其他的所有者, 那么它将会被释放掉</div><div class="line">// ARC 会在设为nil的语句后面, 插入向这个Atom对象发送release消息的代码</div><div class="line">atom = nil;</div></pre></td></tr></table></figure>
</li>
<li><p>释放对象所有者<br>对象图: 面向对象的程序由相互关联的对象网络构成, 这些对象通过OOP继承或者合成连接到一起, 统称为对象图(object graph).<br>在对象图中, 对象通过合成法规则引入其他子类对象, 如果某个父类对象创建了一个子类对象, 那么这个父类对象就声明了它拥有子类对象的所有权, 释放父类对象时, ARC会自动向它的子类发送 <code>release</code> 消息.</p>
</li>
</ul>
<h2 id="5-集合类"><a href="#5-集合类" class="headerlink" title="5. 集合类"></a>5. 集合类</h2><p>Foundation框架含有各种集合类, 集合类拥有容纳其他对象的实例, 当将对象存储在集合类实例中时, 该集合类会声明改对象的所有权. 当这个集合类被释放时, ARC会自动向该集合类中每个对象发送一条 <code>release</code> 对象.</p>
<h1 id="retain-内部实现"><a href="#retain-内部实现" class="headerlink" title="retain 内部实现"></a>retain 内部实现</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">- (id)retain</div><div class="line">&#123;</div><div class="line">    return ((id) self) -&gt; rootRetain();</div><div class="line">&#125;</div></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/songMW/stack.github.io/2017/02/04/使用ARC/" data-id="cj5dkeoxd001oafork65mxamm" class="article-share-link">Partager</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Objective-C/">Objective-C</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="[layout]-bridge-type" class="article article-type-[layout]" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/02/02/bridge-type/" class="article-date">
  <time datetime="2017-02-02T03:05:05.000Z" itemprop="datePublished">2017-02-02</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Objective-C/">Objective-C</a>►<a class="article-category-link" href="/categories/Objective-C/知识点/">知识点</a>►<a class="article-category-link" href="/categories/Objective-C/知识点/bridge-type/">__bridge_type</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/02/02/bridge-type/">__bridge_type</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Objective-C-桥接"><a href="#Objective-C-桥接" class="headerlink" title="Objective-C 桥接"></a>Objective-C 桥接</h2><h3 id="直接桥接数据类型"><a href="#直接桥接数据类型" class="headerlink" title="直接桥接数据类型"></a>直接桥接数据类型</h3><table>
<thead>
<tr>
<th style="text-align:center">Core Foundation数据类型</th>
<th style="text-align:center">Foundation数据类型</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">CFDataRef</td>
<td style="text-align:center">NSData</td>
</tr>
<tr>
<td style="text-align:center">CFDateRef</td>
<td style="text-align:center">NSDate</td>
</tr>
<tr>
<td style="text-align:center">CFMutableDataRef</td>
<td style="text-align:center">NSMutableData</td>
</tr>
<tr>
<td style="text-align:center">CFDictionaryRef</td>
<td style="text-align:center">NSDictionary</td>
</tr>
<tr>
<td style="text-align:center">CFMutableDictionaryRef</td>
<td style="text-align:center">NSMutableDictionary</td>
</tr>
<tr>
<td style="text-align:center">CFArrayRef</td>
<td style="text-align:center">NSArray</td>
</tr>
<tr>
<td style="text-align:center">CFMutableArrayRef</td>
<td style="text-align:center">NSMutableArray</td>
</tr>
<tr>
<td style="text-align:center">CFSetRef</td>
<td style="text-align:center">NSSet</td>
</tr>
<tr>
<td style="text-align:center">CFMutableSetRef</td>
<td style="text-align:center">NSMutableSet</td>
</tr>
<tr>
<td style="text-align:center">CFStringRef</td>
<td style="text-align:center">NSString</td>
</tr>
<tr>
<td style="text-align:center">CFMutableStringRef</td>
<td style="text-align:center">NSMutableString</td>
</tr>
<tr>
<td style="text-align:center">CFNumberRef</td>
<td style="text-align:center">NSNumber</td>
</tr>
<tr>
<td style="text-align:center">CFReadStreamRef</td>
<td style="text-align:center">NSInputStream</td>
</tr>
<tr>
<td style="text-align:center">CFWriteStreamRef</td>
<td style="text-align:center">NSOutputStream</td>
</tr>
</tbody>
</table>
<p>通过直接桥接类型, 编译器能将数据在Core Foundation框架和Foundation框架数据类型之间转换.</p>
<h3 id="1-直接桥接-隐式转换"><a href="#1-直接桥接-隐式转换" class="headerlink" title="1. 直接桥接, 隐式转换"></a>1. 直接桥接, 隐式转换</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">CFStringRef cstr = CFStringCreateWithCString(NULL, &quot;Hello world!&quot;, kCFStringEncodingASCII);</div><div class="line">NSArray *data = [NSArray arrayWithObject: cstr];</div></pre></td></tr></table></figure>
<p>此时编译器会报错: <code>Implicit conversion of C pointer type &#39;CFStringRef&#39; to Objective-C pointer type &#39;id __Nonnull&#39; reqirese a bridge case</code></p>
<h3 id="2-直接桥接-显示转换"><a href="#2-直接桥接-显示转换" class="headerlink" title="2. 直接桥接, 显示转换"></a>2. 直接桥接, 显示转换</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">CFStringRef cstr = CFStringCreateWithCString(NULL, &quot;Hello world!&quot;, kCFStringEncodingASCII);</div><div class="line">NSArray *data = [NSArray arrayWithObject: (NSString *)cstr];</div></pre></td></tr></table></figure>
<p>此时虽然已经将 cstr 显示转换为 NSString 类型, 但是 cstr 是Core Foundation框架创建的对象, ARC时不能自动释放, 此时需要手动释放, 使用__bridge桥接:</p>
<pre><code>CFStringRef cstr = CFStringCreateWithCString(NULL, &quot;Hello world!&quot;, kCFStringEncodingASCII);
NSArray *data = [NSArray arrayWithObject:(__bridge NSString *)(cstr)];
// __bridge 标记无法改变直接桥接对象的所有权, 需要手动管理变量 cstr 的生命周期.
CFRelease(cstr);
//或者
//NSArray *data = [NSArray arrayWithObject:(NSString *)CFBridgingRelease(cstr)];
</code></pre><h3 id="3-ARC-桥接转换"><a href="#3-ARC-桥接转换" class="headerlink" title="3. ARC 桥接转换"></a>3. ARC 桥接转换</h3><p>在使用ARC时, 通过ARC桥接转换可以直接使用直接桥接数据类型, 使用 <code>__bridge</code>, <code>__bridge_retained</code>, <code>__bridge_transfer</code> 作为前缀</p>
<ul>
<li>使用__bridge标记可以在不改变对象所有权的情况下, 将对象从Core Foundation框架数据转换为Foundataion框架数据, 反之亦然;</li>
<li>使用__bridge_retained标记可以将Foundation框架数据类型转换为Core Foundation框架数据类型, 并从ARC接管对象的所有权, 这样就可以手动管理对象的生命周期;</li>
<li>使用__bridge_transfer标记可以将Core Foundation框架数据类型转换为Foundation框架数据类型, 并从手动管理对象的所有权交给ARC, 这样就可以由ARC管理对象的生命周期;</li>
<li>(桥接转换标记 目的数据类型)变量名</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/songMW/stack.github.io/2017/02/02/bridge-type/" data-id="cj5dkeowv0019afor67j6fptw" class="article-share-link">Partager</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Objective-C/">Objective-C</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="[layout]-类" class="article article-type-[layout]" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/01/17/类/" class="article-date">
  <time datetime="2017-01-17T07:19:33.000Z" itemprop="datePublished">2017-01-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Objective-C/">Objective-C</a>►<a class="article-category-link" href="/categories/Objective-C/知识点/">知识点</a>►<a class="article-category-link" href="/categories/Objective-C/知识点/Class/">Class</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/01/17/类/">类</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="类是什么"><a href="#类是什么" class="headerlink" title="类是什么?"></a>类是什么?</h2><p>类应该具有以下特性:</p>
<ol>
<li>类能够完整的做完一件事, 目的很明确, 就是为了完成某件事情而产生;</li>
<li>由实例变量, 属性, 方法, 协议中一个或多个构成;</li>
<li>类也是一个对象即类对象, 类对象是一种数据结构, 存储类的大小, 类名称, 类的版本, 继承层次, 以及消息与函数的映射表;</li>
<li>类对象只能调用类方法;</li>
<li>类描述对象的行为;</li>
</ol>
<h2 id="ObjC-中类的结构图"><a href="#ObjC-中类的结构图" class="headerlink" title="ObjC 中类的结构图"></a>ObjC 中类的结构图</h2><table>
<thead>
<tr>
<th style="text-align:center">objc_class</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">isa_t isa</td>
</tr>
<tr>
<td style="text-align:center">Class super_class</td>
</tr>
<tr>
<td style="text-align:center">cache_t cache</td>
</tr>
<tr>
<td style="text-align:center">class_data_bits_t bits</td>
</tr>
</tbody>
</table>
<ul>
<li><code>isa</code> 指向元类的指针</li>
<li>``</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/songMW/stack.github.io/2017/01/17/类/" data-id="cj5dkeoxm001waforhmvhgo53" class="article-share-link">Partager</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Objective-C/">Objective-C</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="[layout]-A-B问题" class="article article-type-[layout]" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/01/01/A-B问题/" class="article-date">
  <time datetime="2017-01-01T11:28:59.000Z" itemprop="datePublished">2017-01-01</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Objective-C/">Objective-C</a>►<a class="article-category-link" href="/categories/Objective-C/每天一道算法题/">每天一道算法题</a>►<a class="article-category-link" href="/categories/Objective-C/每天一道算法题/1-A-B问题/">1. A+B问题</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/01/01/A-B问题/">A+B问题</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="给出两个整数a和b-求他们的和-但不能使用-等数学运算符"><a href="#给出两个整数a和b-求他们的和-但不能使用-等数学运算符" class="headerlink" title="给出两个整数a和b, 求他们的和, 但不能使用 + 等数学运算符."></a>给出两个整数a和b, 求他们的和, 但不能使用 <code>+</code> 等数学运算符.</h2><ul>
<li>a和b都是整数</li>
<li>可以使用位运算符</li>
</ul>
<h2 id="样例"><a href="#样例" class="headerlink" title="样例"></a>样例</h2><p><code>如果 a = 1 并且 b = 2, 返回3</code></p>
<h2 id="解题思路分析"><a href="#解题思路分析" class="headerlink" title="解题思路分析"></a>解题思路分析</h2><p>根据题目要求可以知道这是一道求和问题, 很容易联想到数学运算符 <code>+</code>, 这样就比较简单, 题目中要求不能使用数学运算符, 只能想其他的方式来解决. 又知a,b是整数, 可以使用位运算符, 这就可以确定这道题考察的是位运算符操作.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">class Solution &#123;</div><div class="line">    public:</div><div class="line">    /*</div><div class="line">    * @param a: The first integer</div><div class="line">    * @param b: The second integer</div><div class="line">    * @return: The sum of a and b</div><div class="line">    */</div><div class="line">    int aplusb(int a, int b) &#123;</div><div class="line">        // write your code here, try to do it without arithmetic operators.</div><div class="line">        return a | b;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<h2 id="温习知识点-位运算符"><a href="#温习知识点-位运算符" class="headerlink" title="温习知识点: 位运算符"></a>温习知识点: 位运算符</h2><h3 id="什么是位运算符"><a href="#什么是位运算符" class="headerlink" title="什么是位运算符?"></a>什么是位运算符?</h3><p>位操作是程序设计中对位模式按位或二进制数的一元和二元操作.</p>
<h3 id="位运算符有哪些"><a href="#位运算符有哪些" class="headerlink" title="位运算符有哪些?"></a>位运算符有哪些?</h3><ul>
<li><code>&amp;</code>   按位与</li>
<li><code>|</code>   按位或</li>
<li><code>^</code>   按位异或</li>
<li><code>~</code>   取反</li>
<li><code>&lt;&lt;</code>  左移</li>
<li><code>&gt;&gt;</code>  右移</li>
</ul>
<h3 id="按位与运算"><a href="#按位与运算" class="headerlink" title="按位与运算"></a>按位与运算</h3><ol>
<li>按位与运算符 <code>&amp;</code> 是双目运算符;</li>
<li>两个二进位均为1时, 结果位才为1, 否则为0; </li>
<li>参与运算的数以 <code>补码</code> 方式出现;</li>
<li>按位与运算通常用来对某些位清0或保留某些位. 例如把 a 的高八位清0, 保留低八位, 可作 a &amp; 255 运算(255的二进制数为11111111).<br>例如: 9 &amp; 5可写算式如下: 00001001(9的二进制补码) &amp; 00000101(5的二进制补码) 00000001(1的二进制补码) 可见 9 &amp; 5 = 1.</li>
</ol>
<h3 id="按位或运算"><a href="#按位或运算" class="headerlink" title="按位或运算"></a>按位或运算</h3><ol>
<li>按位或运算符 <code>|</code> 是双目运算符;</li>
<li>二进位有一个为1时，结果位就为1;</li>
<li>参与运算的两个数均以 <code>补码</code> 出现.<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">    00001001</div><div class="line">|</div><div class="line">    00000101</div><div class="line"></div><div class="line">=   00001101</div></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="按位异或运算"><a href="#按位异或运算" class="headerlink" title="按位异或运算"></a>按位异或运算</h3><ol>
<li>按位异或运算符 <code>^</code> 是双目运算符;</li>
<li>当两对应的二进位相异时, 结果为1;</li>
<li>参与运算数仍以补码出现。<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">    00001001</div><div class="line">^</div><div class="line">    00000101</div><div class="line"></div><div class="line">=   00001100</div></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="求反运算"><a href="#求反运算" class="headerlink" title="求反运算"></a>求反运算</h3><ol>
<li>求反运算符 <code>～</code> 为单目运算符具有右结合性;</li>
<li>对参与运算的数的各二进位按位求反.</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">    ~(1001)</div><div class="line">=</div><div class="line">     0110</div></pre></td></tr></table></figure>
<h3 id="左移运算"><a href="#左移运算" class="headerlink" title="左移运算"></a>左移运算</h3><ol>
<li>左移运算符 <code>&lt;&lt;</code> 是双目运算符;</li>
<li>左移n位就是乘以2的n次方;</li>
<li>其功能把 <code>&lt;&lt;</code> 左边的运算数的各二进位全部左移若干位, 高位丢弃, 低位补0;</li>
<li>有符号数不完全适用, 因为左移有可能导致符号变化, 造成溢出;</li>
<li>总之左移就是: 丢弃最高位, 0补最低位;</li>
<li>最高位 0 正 1 负.</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">a&lt;&lt;4 指把a的各二进位向左移动4位; </div><div class="line">如 a = 00000011(十进制3), 左移4位后为00110000(十进制48).</div></pre></td></tr></table></figure>
<h3 id="右移运算"><a href="#右移运算" class="headerlink" title="右移运算"></a>右移运算</h3><ol>
<li>右移运算符 <code>&gt;&gt;</code> 是双目运算符;</li>
<li>右移n位就是除以2的n次方</li>
<li>其功能是把 <code>&gt;&gt;</code> 左边的运算数的各二进位全部右移若干位;</li>
<li>最高位 0 正 1 负.</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">a&gt;&gt;2 指把a的各二进位向右移动2位;</div><div class="line">如 a = 15, a&gt;&gt;2 表示把 00001111 右移为 00000011(十进制3).</div></pre></td></tr></table></figure>
<ul>
<li>对于有符号数在右移时符号位将随同移动;</li>
<li>当为正数时最高位补0;</li>
<li>当为负数时符号位为1;</li>
<li>最高位是补0或是补1取决于编译系统的规定;</li>
<li>右移对符号位的处理和左移不同: 对于有符号整数来说, 比如int类型, 右移会保持符号位不变.</li>
</ul>
<h3 id="异或操作的妙用"><a href="#异或操作的妙用" class="headerlink" title="异或操作的妙用"></a>异或操作的妙用</h3><ol>
<li>使特定位翻转 要使哪几位翻转就将与其进行∧运算的该几位置为1即可;</li>
<li>与0相∧, 保留原值;</li>
<li><p>交换两个值, 不用临时变量. 我们可以在不用引入其他变量就可以实现变量值的交换用异或操作可以实现:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">a = a^b; //(1)</div><div class="line">b = a^b; //(2)</div><div class="line">a = a^b; //(3)</div></pre></td></tr></table></figure>
</li>
<li><p>异或操作满足结合律和交换律, 且由异或操作的性质知道——对于任意一个整数 a^a = 0.</p>
</li>
</ol>
<h3 id="位与运算"><a href="#位与运算" class="headerlink" title="位与运算"></a>位与运算</h3><ol>
<li>清零 A数中为1的位, B中相应位为0. 然后使二者进行&amp;运算, 即可达到对A清零目的;</li>
<li>取一个数中某些指定位取数A的某些位, 把数B的某些位置1, 就把数A的某些位与1按位与即可;</li>
<li>保留一位的方法数A与数B进行&amp;运算, 数B在数A要保留的位1, 其余位为零;</li>
<li>判断奇偶性: a与1做位与运算, 若结果是1, 则a是奇数; a与1做位与运算, 若结果是0, 则a是偶数.</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/songMW/stack.github.io/2017/01/01/A-B问题/" data-id="cj5dkeous0000afor9vy3ydqh" class="article-share-link">Partager</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Objective-C/">Objective-C</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <a class="extend prev" rel="prev" href="/page/2/">&laquo; __('prev')</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span>
  </nav>
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Catégories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/GracefulSentence/">GracefulSentence</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Installation/">Installation</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Installation/Hexo/">Hexo</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Installation/Hexo/Hello-World/">Hello World</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Installation/Hexo/Hexo-github/">Hexo+github</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Objective-C/">Objective-C</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Objective-C/AVFoundation/">AVFoundation</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Objective-C/AVFoundation/MoviePlayer/">MoviePlayer</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Objective-C/AVFoundation/MoviePlayer/MPMoviePlayerController/">MPMoviePlayerController</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Objective-C/AVFoundation/MoviePlayer/MPMoviePlayerViewController/">MPMoviePlayerViewController</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Objective-C/iOS常见错误收集/">iOS常见错误收集</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Objective-C/iOS常见错误收集/Pod使用过程中遇到的问题/">Pod使用过程中遇到的问题</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Objective-C/iOS常见错误收集/Xcode编译错误集合/">Xcode编译错误集合</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Objective-C/iOS常见错误收集/arm指令集错误收集/">arm指令集错误收集</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Objective-C/iOS常见错误收集/unrecognizedSelector/">unrecognizedSelector</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Objective-C/iOS常见错误收集/崩溃日志/">崩溃日志</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Objective-C/反编译工具/">反编译工具</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Objective-C/反编译工具/Clang/">Clang</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Objective-C/反编译工具/Class-dump/">Class-dump</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Objective-C/开发者账号申请流程/">开发者账号申请流程</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Objective-C/每天一道算法题/">每天一道算法题</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Objective-C/每天一道算法题/1-A-B问题/">1. A+B问题</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Objective-C/测试工具/">测试工具</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Objective-C/测试工具/TestFlight/">TestFlight</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Objective-C/知识点/">知识点</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Objective-C/知识点/Autoreleasepool/">Autoreleasepool</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Objective-C/知识点/Class/">Class</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Objective-C/知识点/KVC实现原理/">KVC实现原理</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Objective-C/知识点/NSRunloop/">NSRunloop</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Objective-C/知识点/Runtime/">Runtime</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Objective-C/知识点/bridge-type/">__bridge_type</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Objective-C/知识点/iOS经验总结/">iOS经验总结</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Objective-C/知识点/load/">load</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Objective-C/知识点/使用ARC/">使用ARC</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Objective-C/知识点/宏-define-与常量-const/">宏(define)与常量(const)</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/python3FroMac/">python3FroMac</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Swift/">Swift</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Swift/基础/">基础</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Swift/基础/BasicOperators/">BasicOperators</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Swift/基础/TheBasic/">TheBasic</a></li></ul></li></ul></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Mot-clés</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Installation/">Installation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Objective-C/">Objective-C</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Sentence/">Sentence</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Swift/">Swift</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Nuage de mot-clés</h3>
    <div class="widget tagcloud">
      <a href="/tags/Installation/" style="font-size: 16.67px;">Installation</a> <a href="/tags/Objective-C/" style="font-size: 20px;">Objective-C</a> <a href="/tags/Sentence/" style="font-size: 10px;">Sentence</a> <a href="/tags/Swift/" style="font-size: 13.33px;">Swift</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">January 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Articles récents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/06/30/MPMoviePlayerController/">MPMoviePlayerController</a>
          </li>
        
          <li>
            <a href="/2017/06/29/MPMoviePlayerViewController/">MPMoviePlayerViewController</a>
          </li>
        
          <li>
            <a href="/2017/06/17/宏与常量/">宏(define)与常量(const)</a>
          </li>
        
          <li>
            <a href="/2017/06/14/KVC实现原理/">KVC实现原理</a>
          </li>
        
          <li>
            <a href="/2017/05/15/Clang/">Clang</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 stack<br>
      Propulsé by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>